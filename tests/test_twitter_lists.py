from src.suckas import twitter
import os

sample_tweet = {u'contributors': None, u'truncated': False, u'text': u'#JN trying to stop US arming rebels by claiming to have #TOW. Where the fighter in pic is from Ahmad al-Abdo brigades http://t.co/wvNhk9fh1o', u'in_reply_to_status_id': None, u'id': 468426707217965056, u'favorite_count': 5, u'source': u'web', u'retweeted': False, u'coordinates': None, u'entities': {u'symbols': [], u'user_mentions': [], u'hashtags': [{u'indices': [0, 3], u'text': u'JN'}, {u'indices': [56, 60], u'text': u'TOW'}], u'urls': [], u'media': [{u'expanded_url': u'http://twitter.com/TahrirSy/status/468426707217965056/photo/1', u'display_url': u'pic.twitter.com/wvNhk9fh1o', u'url': u'http://t.co/wvNhk9fh1o', u'media_url_https': u'https://pbs.twimg.com/media/BoAvm3xIQAAEjft.jpg', u'id_str': u'468426706098077696', u'sizes': {u'large': {u'h': 309, u'resize': u'fit', u'w': 550}, u'small': {u'h': 191, u'resize': u'fit', u'w': 339}, u'medium': {u'h': 309, u'resize': u'fit', u'w': 550}, u'thumb': {u'h': 150, u'resize': u'crop', u'w': 150}}, u'indices': [118, 140], u'type': u'photo', u'id': 468426706098077696, u'media_url': u'http://pbs.twimg.com/media/BoAvm3xIQAAEjft.jpg'}]}, u'in_reply_to_screen_name': None, u'id_str': u'468426707217965056', u'retweet_count': 8, u'in_reply_to_user_id': None, u'favorited': False, u'user': {u'follow_request_sent': False, u'profile_use_background_image': True, u'default_profile_image': False, u'id': 2157882025, u'profile_background_image_url_https': u'https://pbs.twimg.com/profile_background_images/378800000175176466/Zyn6SHu3.jpeg', u'verified': False, u'profile_text_color': u'333333', u'profile_image_url_https': u'https://pbs.twimg.com/profile_images/413042836339052544/3R3XphOY_normal.jpeg', u'profile_sidebar_fill_color': u'DDEEF6', u'entities': {u'url': {u'urls': [{u'url': u'http://t.co/CUXvzERVor', u'indices': [0, 22], u'expanded_url': u'http://tahrirsouri.com/en', u'display_url': u'tahrirsouri.com/en'}]}, u'description': {u'urls': [{u'url': u'http://t.co/9DS0qNVJLx', u'indices': [121, 143], u'expanded_url': u'http://tahrirsouri.com', u'display_url': u'tahrirsouri.com'}]}}, u'followers_count': 4221, u'profile_sidebar_border_color': u'FFFFFF', u'id_str': u'2157882025', u'profile_background_color': u'C0DEED', u'listed_count': 118, u'is_translation_enabled': False, u'utc_offset': 3600, u'statuses_count': 6232, u'description': u'Tahrir Souri: Covering the news of the Syrian war. We tweet in Arabic and in English. RT \u2260 Endorsement. Arabic Website:  http://t.co/9DS0qNVJLx', u'friends_count': 270, u'location': u'Syria', u'profile_link_color': u'0084B4', u'profile_image_url': u'http://pbs.twimg.com/profile_images/413042836339052544/3R3XphOY_normal.jpeg', u'following': False, u'geo_enabled': False, u'profile_banner_url': u'https://pbs.twimg.com/profile_banners/2157882025/1398525589', u'profile_background_image_url': u'http://pbs.twimg.com/profile_background_images/378800000175176466/Zyn6SHu3.jpeg', u'screen_name': u'TahrirSy', u'lang': u'en', u'profile_background_tile': False, u'favourites_count': 826, u'name': u'TahrirSy \u062a\u062d\u0631\u064a\u0631 \u0633\u0648\u0631\u064a', u'notifications': False, u'url': u'http://t.co/CUXvzERVor', u'created_at': u'Sun Oct 27 02:00:27 +0000 2013', u'contributors_enabled': False, u'time_zone': u'Casablanca', u'protected': False, u'default_profile': False, u'is_translator': False}, u'geo': None, u'in_reply_to_user_id_str': None, u'possibly_sensitive': True, u'lang': u'en', u'created_at': u'Mon May 19 16:23:24 +0000 2014', u'in_reply_to_status_id_str': None, u'place': None}

def test():
    #lr = twitter.suck('a','b',{})
    #print lr

    item = twitter.transform(sample_tweet, 'Syria')
    assert item['remoteID'] == sample_tweet['id_str']
    assert item['content'] == sample_tweet['text']
    assert item['image'] == sample_tweet['entities']['media'][0]['media_url']
    assert item['author']['username'] == sample_tweet['user']['screen_name']

    